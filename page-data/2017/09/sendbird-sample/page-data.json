{"componentChunkName":"component---src-templates-blog-post-js","path":"/2017/09/sendbird-sample","result":{"data":{"site":{"siteMetadata":{"title":"saitoxu.io","siteUrl":"https://saitoxu.io"}},"ogp":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAAjElEQVQoz82STQoDIQyF5/5HUVcuFNfeRdyIohvx7xWFllJm2llMaQOPhJiEj8QNF9v21YFjjIc/o+eeQ8LXgne2V7tLWGtFSgnWWhhjVhxjRM4Z3vul3vtnwvujcw6UUhBCoJQCYwxCCEgpobUG5xwhhPMDpy+lLIqpSdxaW4QzP+Pf7vDSK//dx74BXyBi+B0nsZEAAAAASUVORK5CYII=","width":1200,"height":630,"src":"/static/bb302f3ca7aabb14b0ae74df1c534526/e7e81/ogp.png","srcSet":"/static/bb302f3ca7aabb14b0ae74df1c534526/e7e81/ogp.png 1x"}}},"markdownRemark":{"id":"3ce694f0-b373-5a2d-b83d-da5b4f3b22cb","excerpt":"SendBirdという簡単にチャット機能を作れる SDK と API を提供しているサービスがあります。\n今回これを使ったサンプルアプリを React Native で書いてみました。 次のように動きます。 スクリーンショット リポジトリはこちらになります。 saitoxu/SendBirdSample…","html":"<p><a href=\"https://sendbird.com/\">SendBird</a>という簡単にチャット機能を作れる SDK と API を提供しているサービスがあります。\n今回これを使ったサンプルアプリを React Native で書いてみました。</p>\n<p>次のように動きます。</p>\n<p><img src=\"/80a938f947ebf5090a88687550db857a/2017-09-17-screenshot.gif\" alt=\"スクリーンショット\"></p>\n<p>リポジトリはこちらになります。</p>\n<p><a href=\"https://github.com/saitoxu/SendBirdSample\">saitoxu/SendBirdSample</a></p>\n<h2><strong>SendBird SDK (JavaScript)の使い方</strong></h2>\n<p>(1) はじめにユーザを作成して SendBird に接続します。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">sb<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>myUserId<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">user<span class=\"token punctuation\">,</span> error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// do something</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>(2) 次にチャンネルを作ります。<code>userIds</code>に渡したユーザとのグループチャンネルが作れます。\nユーザ ID を 1 つ渡せばそのユーザとの 1 対 1 のチャットができます。\n2 つ目の引数の<code>distinct</code>は<code>true</code>だと以前のチャンネルを引き継ぎ、<code>false</code>だと毎回新しくチャンネルを作ります。\n以前のメッセージを引き継ぎたい場合は<code>true</code>にする必要があります。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> userIds <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>friendUserId<span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"sample group channel\"</span>\nsb<span class=\"token punctuation\">.</span>GroupChannel<span class=\"token punctuation\">.</span><span class=\"token function\">createChannelWithUserIds</span><span class=\"token punctuation\">(</span>\n  userIds<span class=\"token punctuation\">,</span>\n  <span class=\"token boolean\">true</span> <span class=\"token comment\">/* distinct */</span><span class=\"token punctuation\">,</span>\n  name<span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">(</span><span class=\"token parameter\">channel<span class=\"token punctuation\">,</span> error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// do something</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>(3) メッセージは次のように送信します。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">channel<span class=\"token punctuation\">.</span><span class=\"token function\">sendUserMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"message body\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">message<span class=\"token punctuation\">,</span> error</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// do something</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>(4) メッセージの受信はハンドラオブジェクトを作成して、\nコールバックを登録すると受信できます。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> ChannelHandler <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">sb<span class=\"token punctuation\">.</span>ChannelHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nChannelHandler<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onMessageReceived</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">receivedChannel<span class=\"token punctuation\">,</span> message</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// do something</span>\n<span class=\"token punctuation\">}</span>\nsb<span class=\"token punctuation\">.</span><span class=\"token function\">addChannelHandler</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ChatView\"</span><span class=\"token punctuation\">,</span> ChannelHandler<span class=\"token punctuation\">)</span></code></pre></div>\n<h2><strong>使ってみて</strong></h2>\n<ul>\n<li>バックエンドの実装が不要で、上記のとおりかなり簡単にチャットシステムが作れます</li>\n<li>既読機能や入力中かどうか取得する機能、ファイル添付など、チャットに必要な機能がほとんど揃っています</li>\n<li>フリープランで 1,000MAU、同時コネクション 25 まで使えるので、プロトタイプなどに使えそうです。現在のところ有料プランの価格は問い合わせる必要があります</li>\n</ul>\n<p>調べたところあまりまだ知名度が高くないようですが、とてもいいサービスだと思いました。\nチャット機能を作ろうと考えている方はぜひ検討してみてください！</p>","frontmatter":{"title":"手軽にチャット機能を作れるSendBirdを試してみた","date":"September 17, 2017","tags":["JavaScript","React Native","SendBird"],"ogp":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAA0ElEQVQoz62TzQ7BQBCAPbkX8A7OOHKSlAtx4AFcSPxFSBANjf7s7KfNKm2pn+gkszuZ7HwzO7Nb0lpTpJaiJSsvXF9JChhnSNpPKhqRtC88nYrLAEH/WF4MfQk02aBZ3bOYnjnbsFsrnJPm4mi2S8V8rDgdhcNGCPxkbA4wkkrZZtBz2K0Eq+bSb3mMLJ9+06PbcBm2PTp1F+/yEQgq7NFkpvF9Mx0VmB4pZWxRpo+xPxdIYig3x9c9fFthtD0myYd3x/sr/6N3oIgU9ksi1hUQb2LNF40fvwAAAABJRU5ErkJggg==","width":1200,"height":630,"src":"/static/c1fb42f243835b404d5c949f9d0f54a6/e7e81/2017-09-17-ogp.png","srcSet":"/static/c1fb42f243835b404d5c949f9d0f54a6/e7e81/2017-09-17-ogp.png 1x"}}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2017/09/sendbird-sample","previous":{"fields":{"slug":"/2017/09/carrierwave-with-cloudfront"},"frontmatter":{"title":"CarrierWave+FogでリソースをS3に保存・CloudFrontで配信するときの小ネタ","tags":["Rails","Amazon S3","CloudFront"]}},"next":{"fields":{"slug":"/2017/09/react-native-d3js"},"frontmatter":{"title":"D3.js on React Nativeでグラフ描画","tags":["JavaScript","React Native","D3.js"]}}}}}
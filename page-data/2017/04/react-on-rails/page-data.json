{"componentChunkName":"component---src-templates-blog-post-js","path":"/2017/04/react-on-rails","result":{"data":{"site":{"siteMetadata":{"title":"saitoxu.io","siteUrl":"https://saitoxu.io"}},"ogp":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAAjElEQVQoz82STQoDIQyF5/5HUVcuFNfeRdyIohvx7xWFllJm2llMaQOPhJiEj8QNF9v21YFjjIc/o+eeQ8LXgne2V7tLWGtFSgnWWhhjVhxjRM4Z3vul3vtnwvujcw6UUhBCoJQCYwxCCEgpobUG5xwhhPMDpy+lLIqpSdxaW4QzP+Pf7vDSK//dx74BXyBi+B0nsZEAAAAASUVORK5CYII=","width":1200,"height":630,"src":"/static/bb302f3ca7aabb14b0ae74df1c534526/e7e81/ogp.png","srcSet":"/static/bb302f3ca7aabb14b0ae74df1c534526/e7e81/ogp.png 1x"}}},"markdownRemark":{"id":"2831c787-c036-5766-807c-66de65723459","excerpt":"Rails5.1 からサポートされる JavaScript 周りのツールを使って、\nRails 上に React の環境を構築する手順をまとめました。 環境 手順 1. プロジェクト作成 rails newでプロジェクトを作成します。\nReact のプロジェクトを作る場合は、--webpack=react…","html":"<p>Rails5.1 からサポートされる JavaScript 周りのツールを使って、\nRails 上に React の環境を構築する手順をまとめました。</p>\n<h2><strong>環境</strong></h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ruby -v\nruby <span class=\"token number\">2.4</span>.0p0 <span class=\"token punctuation\">(</span><span class=\"token number\">2016</span>-12-24 revision <span class=\"token number\">57164</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">[</span>x86_64-darwin16<span class=\"token punctuation\">]</span>\n$ rails -v\nRails <span class=\"token number\">5.1</span>.0.rc1</code></pre></div>\n<h2><strong>手順</strong></h2>\n<p><strong>1. プロジェクト作成</strong></p>\n<p><code>rails new</code>でプロジェクトを作成します。\nReact のプロジェクトを作る場合は、<code>--webpack=react</code>を指定します。\nもう turbolink も要らないだろうということで、<code>--skip-turbolinks</code>も指定しています。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ rails new react-on-rails --webpack<span class=\"token operator\">=</span>react --skip-turbolinks</code></pre></div>\n<p>グローバル環境に gem をインストールするのを嫌う場合は、以下の手順で作成します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ rails new react-on-rails --skip-bundle --skip-turbolinks\n$ <span class=\"token builtin class-name\">cd</span> react-on-rails\n$ bundle <span class=\"token function\">install</span> --path vendor/bundle\n$ rails webpacker:install\n$ rails webpacker:install:react</code></pre></div>\n<p>ここまでで React のサンプルが以下のように作られます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ tree app/javascript\napp/javascript\n└── packs\n    ├── application.js\n    └── hello_react.jsx</code></pre></div>\n<p><strong>2. foreman インストール</strong></p>\n<p>開発中は Web サーバと Webpack のサーバ両方を起動しないといけないので、\nプロセス管理ツールの foreman をインストールして手間を省きます。</p>\n<p>Gemfile に<code>gem 'foreman'</code>と追記し、<code>bundle install</code>を実行します。</p>\n<p>その後、以下のような Procfile をディレクトリトップに置きます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">web: bundle <span class=\"token builtin class-name\">exec</span> rails s\nwebpack-dev-server: ./bin/webpack-dev-server</code></pre></div>\n<p>これで開発中は、<code>bundle exec foreman start</code>でサーバを起動できるようになります。</p>\n<p><strong>3. controller 作成</strong></p>\n<p>適当に controller を作成して、</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ rails g controller home index</code></pre></div>\n<p><code>hello_react.jsx</code>を読むようにします。</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># application.html.erb</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token constant\">DOCTYPE</span> html<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>html<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>head<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>title<span class=\"token operator\">></span><span class=\"token constant\">ReactOnRails</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>title<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token string\">%= csrf_meta_tags %>\n\n    &lt;%=</span> stylesheet_link_tag    <span class=\"token string\">'application'</span><span class=\"token punctuation\">,</span> media<span class=\"token punctuation\">:</span> <span class=\"token string\">'all'</span> <span class=\"token string\">%>\n    &lt;%= javascript_include_tag 'application' %></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token string\">%= javascript_pack_tag    'hello_react' %>\n  &lt;/head>\n\n  &lt;body>\n    &lt;%=</span> <span class=\"token keyword\">yield</span> <span class=\"token string\">%>\n  &lt;/body></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">></span></code></pre></div>\n<p>これでサーバを立ち上げて、<code>http://localhost:5000/home/index</code>にアクセスすると、\nReact のコンポーネントが描画されてるのが確認できると思います（ポートとかパスは適当に読み替えてください）。</p>\n<h2><strong>おわりに</strong></h2>\n<p>以上、Rails5.1 での React の環境構築手順でした。</p>","frontmatter":{"title":"React on Railsの環境構築手順","date":"April 13, 2017","tags":["Rails","React"],"ogp":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVklEQVQoz42Sz0rDQBDG8xJFaJpNNtGTCSIIBQU9KFg86MmrePHmxb5DH6Kv0VOhD9BXaB+gFoqVJmjF/tnPzWQ3XdNYDHzMLGF++83MWtjxCSEoJkmCKIrAGIPv+2USOlpmYRp1vgvI02LOKfIC1PoFW60yKbBYr7eBQZCDuJ/nQl2SOTTdmOcyh4Hrwk/FHAQ1W+aMcu3YMgs/Oh18drvkkqBFh44Du3EH++oG7KSO2vkl3KNjOPUz8P0Dglq6eN7r4bXRwHurhbdmE3G7jXm/T//i2UwCQ3JYeXpB5fEZzukF9u4fUL2+RVVesgEqd8vxGMvRCKvJBIvhEN+DAZbTaQaMY9WyA34YwpOiNlN5XibdcjYuom5JqChbFhIoaIbcE77nGovZbJ0cGlvIZqaiVmEpQm/ZfDYm1CpzljtUzk2HxiMuVQqc/yXJoyhn+BWG4b+AP1xiSNEmte/jAAAAAElFTkSuQmCC","width":1200,"height":630,"src":"/static/493fccec6ac756623395597b5e41e7d0/e7e81/2017-04-13-ogp.png","srcSet":"/static/493fccec6ac756623395597b5e41e7d0/e7e81/2017-04-13-ogp.png 1x"}}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2017/04/react-on-rails","previous":{"fields":{"slug":"/2017/04/appearin-sample"},"frontmatter":{"title":"appear.inのAPIを使って簡単ビデオチャット","tags":["React","JavaScript"]}},"next":{"fields":{"slug":"/2017/04/react-redux-async"},"frontmatter":{"title":"React+ReduxでAJAXを使ったアプリを作ってみる","tags":["React","Redux","JavaScript"]}}}}}
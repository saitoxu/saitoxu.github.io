{"componentChunkName":"component---src-templates-blog-post-js","path":"/2017/06/google-cloud-vision-ocr","result":{"data":{"site":{"siteMetadata":{"title":"saitoxu.io","siteUrl":"https://saitoxu.io"}},"ogp":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAAjElEQVQoz82STQoDIQyF5/5HUVcuFNfeRdyIohvx7xWFllJm2llMaQOPhJiEj8QNF9v21YFjjIc/o+eeQ8LXgne2V7tLWGtFSgnWWhhjVhxjRM4Z3vul3vtnwvujcw6UUhBCoJQCYwxCCEgpobUG5xwhhPMDpy+lLIqpSdxaW4QzP+Pf7vDSK//dx74BXyBi+B0nsZEAAAAASUVORK5CYII=","width":1200,"height":630,"src":"/static/bb302f3ca7aabb14b0ae74df1c534526/e7e81/ogp.png","srcSet":"/static/bb302f3ca7aabb14b0ae74df1c534526/e7e81/ogp.png 1x"}}},"markdownRemark":{"id":"354f69c9-b281-5af9-8f0a-9f1e826e1603","excerpt":"今更ながら Google Cloud Vision を試してみたので導入部分をメモしておきます。 準備 Google Cloud Platform のプロジェクトを作成します。 プロジェクト作成後、以下の手順が必要です。 Google Cloud Vision API を有効にする API…","html":"<p>今更ながら Google Cloud Vision を試してみたので導入部分をメモしておきます。</p>\n<h4><strong>準備</strong></h4>\n<p>Google Cloud Platform のプロジェクトを作成します。</p>\n<p>プロジェクト作成後、以下の手順が必要です。</p>\n<ul>\n<li>Google Cloud Vision API を有効にする</li>\n<li>API キーまたはサービスアカウントキーを発行する</li>\n<li>課金を有効にする</li>\n</ul>\n<h4><strong>実装</strong></h4>\n<p>Node.js 用のクライアントライブラリがあるので、それを使います。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">mkdir</span> google-cloud-vision-test\n$ <span class=\"token builtin class-name\">cd</span> google-cloud-vision-test\n$ <span class=\"token function\">yarn</span> init\n$ <span class=\"token function\">yarn</span> <span class=\"token function\">add</span> @google-cloud/vision</code></pre></div>\n<p>今は<code>google-cloud</code>のライブラリ自体をインストールするより、\n個別に使用するモジュールをインストールする方が良いみたいです。</p>\n<p>Cloud Vision を使用するコードは次のようになります。\n今回は OCR を使ってみました。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// sample.js</span>\n<span class=\"token keyword\">const</span> cloudVision <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"@google-cloud/vision\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> vision <span class=\"token operator\">=</span> <span class=\"token function\">cloudVision</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  projectId<span class=\"token punctuation\">:</span> <span class=\"token string\">\"project-name\"</span><span class=\"token punctuation\">,</span>\n  keyFilename<span class=\"token punctuation\">:</span> <span class=\"token string\">\"/path/to/service-account-key.json\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nvision<span class=\"token punctuation\">.</span><span class=\"token function\">detectText</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/path/to/image.jpg\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">,</span> apiResponse</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h4><strong>試してみる</strong></h4>\n<p>実際に使ってみます。</p>\n<p>次のような画像を用意して文字認識をしてみます（字汚いですが）。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ff9525dab1dbcc7d5c5f2f3858a8a3cb/b49a5/2017-06-03-sample.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAGeiV5eCKP/xAAZEAEAAwEBAAAAAAAAAAAAAAACAQMEEQD/2gAIAQEAAQUCyVlCaT1RxZHBqWg+c9f/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwFn/8QAHBAAAgICAwAAAAAAAAAAAAAAAAECMREyUWGR/9oACAEBAAY/ApNpWaLwaHnksk+z/8QAGhABAQEAAwEAAAAAAAAAAAAAAQARITFh4f/aAAgBAQABPyF1TAclhkPAlLbWbQ/LEJ0pv//aAAwDAQACAAMAAAAQSD//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAAREP/aAAgBAgEBPxBM/8QAHBABAAIDAAMAAAAAAAAAAAAAAQARITFxQfDx/9oACAEBAAE/EKX6GSsQdhF3pPlmMygkdL4I1R6ORSbAPWf/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Sample\"\n        title=\"Sample\"\n        src=\"/static/ff9525dab1dbcc7d5c5f2f3858a8a3cb/88218/2017-06-03-sample.jpg\"\n        srcset=\"/static/ff9525dab1dbcc7d5c5f2f3858a8a3cb/7237a/2017-06-03-sample.jpg 148w,\n/static/ff9525dab1dbcc7d5c5f2f3858a8a3cb/0cfdf/2017-06-03-sample.jpg 295w,\n/static/ff9525dab1dbcc7d5c5f2f3858a8a3cb/88218/2017-06-03-sample.jpg 590w,\n/static/ff9525dab1dbcc7d5c5f2f3858a8a3cb/b49a5/2017-06-03-sample.jpg 816w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>次のように結果が返ってきました。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ node sample.js\n<span class=\"token punctuation\">[</span> <span class=\"token string\">'こんにちは<span class=\"token entity\" title=\"\\n\">\\n</span>'</span>, <span class=\"token string\">'こんにちは'</span> <span class=\"token punctuation\">]</span></code></pre></div>\n<p>簡単ですが以上です。</p>","frontmatter":{"title":"Google Cloud VisionでOCR","date":"June 03, 2017","tags":["Google Cloud"],"ogp":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABW0lEQVQoz5WRPU/CUBSG+S3+HEcTF0xwczEOJk7+ARMHBxM3BifjbOJk1LASBkkQI5qg8QMLtKWF9n608HgrGAGLwvDmJOee++R9z8kopZiWlHKsSgbxUFqKqbfffzPpMGmqItIJQPDUVNSbEV0NevQ2C5pJdzgcjmLYO9OsHrTI7r9wfFJlMIgRUi7mMHHV70OjXmDzsMRNtU71tkJxPYtXuMQYRQrxt8Px3UgRoAxQ3O1SO1/GcsAkpry9QTt/NASG4QLAZPmGKLuvdC+WeLjOUc5v8bi2QtiyUHE84XAcnEm7bqIoUpgVoqwrVCWHfbqDXyx99bSZ01qnHmbCYTLk+T5v7w0aHxb3tRpNu4fbA1eAEwRYlkWrbeM4DqGJPdPhdzMwQ23bNp/a1J+ecV0H33dxHRvf8+gk6nim10WY2HNFjiJtFBGbXSWutVajOql/I/8cZX5NQz8BYZlHDQbv70gAAAAASUVORK5CYII=","width":1200,"height":630,"src":"/static/2118a8f49f4b825ba9658be44ebc2ffe/e7e81/2017-06-03-ogp.png","srcSet":"/static/2118a8f49f4b825ba9658be44ebc2ffe/e7e81/2017-06-03-ogp.png 1x"}}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2017/06/google-cloud-vision-ocr","previous":{"fields":{"slug":"/2017/05/rust-feature"},"frontmatter":{"title":"Rustのメモリ安全性を支える3つの概念","tags":["Rust"]}},"next":{"fields":{"slug":"/2017/06/rails-spa-authentication"},"frontmatter":{"title":"RailsにおけるSPAの認証方法について","tags":["Rails","React"]}}}}}
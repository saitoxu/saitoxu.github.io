{"componentChunkName":"component---src-templates-blog-post-js","path":"/2018/02/recharts-intro","result":{"data":{"site":{"siteMetadata":{"title":"saitoxu.io","siteUrl":"https://saitoxu.io"}},"ogp":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAAjElEQVQoz82STQoDIQyF5/5HUVcuFNfeRdyIohvx7xWFllJm2llMaQOPhJiEj8QNF9v21YFjjIc/o+eeQ8LXgne2V7tLWGtFSgnWWhhjVhxjRM4Z3vul3vtnwvujcw6UUhBCoJQCYwxCCEgpobUG5xwhhPMDpy+lLIqpSdxaW4QzP+Pf7vDSK//dx74BXyBi+B0nsZEAAAAASUVORK5CYII=","width":1200,"height":630,"src":"/static/bb302f3ca7aabb14b0ae74df1c534526/e7e81/ogp.png","srcSet":"/static/bb302f3ca7aabb14b0ae74df1c534526/e7e81/ogp.png 1x"}}},"markdownRemark":{"id":"27ca5ac0-4909-581e-b615-c232d644ab4b","excerpt":"前から気になっていた React のグラフ描画ライブラリRechartsを触ってみた。\n内部でD3.jsを使っていて、README に書いてあるが大きな特徴は 3 つあるらしい。 React コンポーネントとして使える 素の SVG…","html":"<p>前から気になっていた React のグラフ描画ライブラリ<a href=\"https://github.com/recharts/recharts\">Recharts</a>を触ってみた。\n内部で<a href=\"https://github.com/d3/d3\">D3.js</a>を使っていて、README に書いてあるが大きな特徴は 3 つあるらしい。</p>\n<ul>\n<li>React コンポーネントとして使える</li>\n<li>素の SVG の描画をサポート</li>\n<li>画面に表示したいコンポーネントを宣言するだけで描画可能</li>\n</ul>\n<p>基本は次のように使う。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> LineChart<span class=\"token punctuation\">,</span> Line<span class=\"token punctuation\">,</span> XAxis<span class=\"token punctuation\">,</span> YAxis <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"recharts\"</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> uv<span class=\"token punctuation\">:</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span> pv<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">,</span> uv<span class=\"token punctuation\">:</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span> pv<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"c\"</span><span class=\"token punctuation\">,</span> uv<span class=\"token punctuation\">:</span> <span class=\"token number\">19</span><span class=\"token punctuation\">,</span> pv<span class=\"token punctuation\">:</span> <span class=\"token number\">9</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"d\"</span><span class=\"token punctuation\">,</span> uv<span class=\"token punctuation\">:</span> <span class=\"token number\">11</span><span class=\"token punctuation\">,</span> pv<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"e\"</span><span class=\"token punctuation\">,</span> uv<span class=\"token punctuation\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> pv<span class=\"token punctuation\">:</span> <span class=\"token number\">12</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"f\"</span><span class=\"token punctuation\">,</span> uv<span class=\"token punctuation\">:</span> <span class=\"token number\">22</span><span class=\"token punctuation\">,</span> pv<span class=\"token punctuation\">:</span> <span class=\"token number\">13</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>LineChart width<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">400</span><span class=\"token punctuation\">}</span> height<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">200</span><span class=\"token punctuation\">}</span> data<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>XAxis dataKey<span class=\"token operator\">=</span><span class=\"token string\">\"name\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>YAxis <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Line dataKey<span class=\"token operator\">=</span><span class=\"token string\">\"uv\"</span> stroke<span class=\"token operator\">=</span><span class=\"token string\">\"#8884d8\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Line dataKey<span class=\"token operator\">=</span><span class=\"token string\">\"pv\"</span> stroke<span class=\"token operator\">=</span><span class=\"token string\">\"#82ca9d\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>LineChart<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5a1494b2dbfd95b9df43b44c07769e2d/2d422/02-28-chart1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.71317829457365%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA7UlEQVQoz41SC5bDIAj0/vdtlP8ypNrU59tdEgIIDiOmqWpA3L10ysl/rp3WVT3aE3AH3v2/LJFFE5EjQ3RDAbMdNy99P7NuMcyy+pp5SCZVPjGKYU+NIZK1M9+YpdgAhDdGMU1a5E2/52qe9aIxEkNMg5SjjSGFfuqMWLMQG6F9cLwGRSdOIInOXL49RtBsO/KaIbrr3Vmnut7MkkCdSjwWh7dtg6m6F7t80Y3tBtoZr/MvBP++IDBk5QIEwAKKA9A/JWc4AjeN34dzJrAqd7zrzP8Wt957AULhzwZQ+ERUvpnFdV0rP2OAPPf/ACl1Z41NSnk2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Chart1\"\n        title=\"Chart1\"\n        src=\"/static/5a1494b2dbfd95b9df43b44c07769e2d/799d3/02-28-chart1.png\"\n        srcset=\"/static/5a1494b2dbfd95b9df43b44c07769e2d/00d96/02-28-chart1.png 148w,\n/static/5a1494b2dbfd95b9df43b44c07769e2d/0b23c/02-28-chart1.png 295w,\n/static/5a1494b2dbfd95b9df43b44c07769e2d/799d3/02-28-chart1.png 590w,\n/static/5a1494b2dbfd95b9df43b44c07769e2d/2a3d6/02-28-chart1.png 885w,\n/static/5a1494b2dbfd95b9df43b44c07769e2d/ae92f/02-28-chart1.png 1180w,\n/static/5a1494b2dbfd95b9df43b44c07769e2d/2d422/02-28-chart1.png 1290w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>各チャートコンポーネント（<code>&#x3C;LineChart /></code>など）のドキュメントに、\n子コンポーネントとして受け取れるパーツのコンポーネント（<code>&#x3C;XAxis /></code>, <code>&#x3C;Line /></code>など）が定義されているので、\nその中から描画したいコンポーネントを追加していく。</p>\n<p>たとえば上記の例に<code>&#x3C;CartesianGrid /></code>という格子上の線を描くコンポーネントを足すと以下のようになる。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>LineChart width<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">400</span><span class=\"token punctuation\">}</span> height<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">200</span><span class=\"token punctuation\">}</span> data<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>CartesianGrid stroke<span class=\"token operator\">=</span><span class=\"token string\">\"#eee\"</span> strokeDasharray<span class=\"token operator\">=</span><span class=\"token string\">\"5 5\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>XAxis dataKey<span class=\"token operator\">=</span><span class=\"token string\">\"name\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>YAxis <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Line dataKey<span class=\"token operator\">=</span><span class=\"token string\">\"uv\"</span> stroke<span class=\"token operator\">=</span><span class=\"token string\">\"#8884d8\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Line dataKey<span class=\"token operator\">=</span><span class=\"token string\">\"pv\"</span> stroke<span class=\"token operator\">=</span><span class=\"token string\">\"#82ca9d\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>LineChart<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1f509c84016a117d9721f5abb0521514/2d422/02-28-chart2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.71317829457365%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA+UlEQVQoz6VSi27DMAj0//9vY/MeZ2LX7apN2pAQJsBxQJqqBsTd/6WJEKoWbQGeoNu3w/cP8cOHJdJoIvKNYXWrBCLb335iyFx5LwwhlqwkgyoFAh/JsCfoYg0R8Tse0ZhlsgEI2KxOi3XZKFB9jmuevmuwaIzEEEurHG0MmegoNnuOvHammVjFFtfgeAyKThyUq4KFIjbr0zazc2TfY2gGKTuisx5qd+OayuO4Ue2w09gdimWOrTXCZHsTPq+8j/ThUI21KAOATaZ6ePxVcocjcGn8Psw5Yury33XGf/Fb730CQPFeDaB4E9F8YxXXde348vkmsOq/AFnnZy9E9FwdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Chart2\"\n        title=\"Chart2\"\n        src=\"/static/1f509c84016a117d9721f5abb0521514/799d3/02-28-chart2.png\"\n        srcset=\"/static/1f509c84016a117d9721f5abb0521514/00d96/02-28-chart2.png 148w,\n/static/1f509c84016a117d9721f5abb0521514/0b23c/02-28-chart2.png 295w,\n/static/1f509c84016a117d9721f5abb0521514/799d3/02-28-chart2.png 590w,\n/static/1f509c84016a117d9721f5abb0521514/2a3d6/02-28-chart2.png 885w,\n/static/1f509c84016a117d9721f5abb0521514/ae92f/02-28-chart2.png 1180w,\n/static/1f509c84016a117d9721f5abb0521514/2d422/02-28-chart2.png 1290w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>また、チャートコンポーネントを<code>&#x3C;ResponsiveContainer /></code>というコンポーネントで囲うと画面サイズに応じてグラフのサイズを可変にできる。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>ResponsiveContainer\n          width<span class=\"token operator\">=</span><span class=\"token string\">\"80%\"</span>\n          height<span class=\"token operator\">=</span><span class=\"token string\">\"40%\"</span>\n          minWidth<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">400</span><span class=\"token punctuation\">}</span>\n          minHeight<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">200</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>LineChart data<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>CartesianGrid stroke<span class=\"token operator\">=</span><span class=\"token string\">\"#eee\"</span> strokeDasharray<span class=\"token operator\">=</span><span class=\"token string\">\"5 5\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>XAxis dataKey<span class=\"token operator\">=</span><span class=\"token string\">\"name\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>YAxis <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>Line dataKey<span class=\"token operator\">=</span><span class=\"token string\">\"uv\"</span> stroke<span class=\"token operator\">=</span><span class=\"token string\">\"#8884d8\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>Line dataKey<span class=\"token operator\">=</span><span class=\"token string\">\"pv\"</span> stroke<span class=\"token operator\">=</span><span class=\"token string\">\"#82ca9d\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>LineChart<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ResponsiveContainer<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>公式では対応していないが、以下の記事によると React Native でも使えるらしい。</p>\n<p><a href=\"https://dzone.com/articles/using-recharts-in-react-native-project\">Using Recharts in React Native project - DZone Web Dev</a></p>\n<p>以上、徒然なるままに紹介したが、けっこう使いやすく、そこそこにカスタマイズもできそうなので今後実プロダクトで使ってみたい。</p>","frontmatter":{"title":"Reactのグラフ描画ライブラリRechartsを使ってみた","date":"February 28, 2018","tags":["JavaScript","React"],"ogp":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAAyklEQVQoz62Syw6CMBRE+f9PcqcbFy7cyV4TDfJGoW/G3qYlBkRNYDG50+b2tNM24pxDSrmKiBWR0VqvImINQKXUIs0CycMYp957qs5bGX8aaybrJkA3aev50eLybFHZO7m1HRouUDCOtGNohXS9mfXCr5kF0u4EOWQFNtcE2yTF/p5jl2SIqxrHvMSprB00rhqUdpN+Dqj90Y2Pad4aw3yIRykosvkn8viigz6N1a/IQ3OQGlWv8Xf5+sqLvw1j9rWEcL98iYhBrBekzl6VsqNBXQAAAABJRU5ErkJggg==","width":1200,"height":630,"src":"/static/21da6ec07752c15e9d015c29a130ebf6/e7e81/02-28-ogp.png","srcSet":"/static/21da6ec07752c15e9d015c29a130ebf6/e7e81/02-28-ogp.png 1x"}}}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2018/02/recharts-intro","previous":{"fields":{"slug":"/2018/01/prettier"},"frontmatter":{"title":"ESLintを使ってるプロジェクトにPrettierを導入した","tags":["JavaScript"]}},"next":{"fields":{"slug":"/2018/03/sidekiq-introduction"},"frontmatter":{"title":"RailsにSidekiqを導入するにあたって考慮したポイント","tags":["Rails"]}}}}}